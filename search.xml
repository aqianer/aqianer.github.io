<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Burpsuite抓包实践</title>
      <link href="/article/1/"/>
      <url>/article/1/</url>
      
        <content type="html"><![CDATA[<p>下载BurpSuite</p><p><img src="https://www.freeimg.cn/i/2024/11/25/674495d9768ac.webp" alt="1732545131368.png"></p><h4 id="实现隐藏root和绕过SSL证书校验抓包"><a href="#实现隐藏root和绕过SSL证书校验抓包" class="headerlink" title="实现隐藏root和绕过SSL证书校验抓包"></a>实现隐藏root和绕过SSL证书校验抓包</h4><blockquote><p>场景：目前安全测试经常遇到移动APP只支持Android9.0以上ARM架构的模拟器安装、且APP检测root，验证SSL证书的场景。之前的Xposed框架只支持到Android8.1就不再更新了, 因此Android 9.0以上的模拟器需要选择其它方案。</p></blockquote><h6 id="1-实现隐藏root和绕过SSL证书校验抓包"><a href="#1-实现隐藏root和绕过SSL证书校验抓包" class="headerlink" title="1. 实现隐藏root和绕过SSL证书校验抓包"></a>1. 实现隐藏root和绕过SSL证书校验抓包</h6><blockquote><p>安装模拟器雷电9（Android9.0兼容arm架构）：ldinst9_9.0.24.2.exe</p></blockquote><blockquote><p><a href="https://res.ldmnq.com/download/leidian9/ldinst9_9.0.24.2.exe">https://res.ldmnq.com/download/leidian9/ldinst9_9.0.24.2.exe</a></p></blockquote><h6 id="2-设置代理："><a href="#2-设置代理：" class="headerlink" title="2. 设置代理："></a>2. 设置代理：</h6><p>Burpsuiteproxy配置选择本机ip，端口号按如下设置</p><p><a href="https://portswigger.net/burp/documentation/desktop/mobile/config-android-device">安卓设备proxy代理</a></p><p><img src="https://www.freeimg.cn/i/2024/11/25/674495d9ca310.webp" alt="1732547160988.png"></p><h6 id="3-安装burpsuite证书在burpsuite-proxy-options导出证书，导入到模拟器中并安装"><a href="#3-安装burpsuite证书在burpsuite-proxy-options导出证书，导入到模拟器中并安装" class="headerlink" title="3. 安装burpsuite证书在burpsuite proxy options导出证书，导入到模拟器中并安装"></a>3. 安装burpsuite证书在burpsuite proxy options导出证书，导入到模拟器中并安装</h6><blockquote><p>由于模拟器设置burp代理访问https，会提示证书不信任，需要装LSposed框架来安装justtrustme插件和magisk隐藏root（一般应用会检测是否系统是否root,如果是则退出应用）。</p></blockquote><h6 id="4-开启模拟器root权限和adb调试权限。adb命令大全"><a href="#4-开启模拟器root权限和adb调试权限。adb命令大全" class="headerlink" title="4. 开启模拟器root权限和adb调试权限。adb命令大全"></a>4. 开启模拟器root权限和adb调试权限。<a href="https://cloud.tencent.com/developer/article/2342099">adb命令大全</a></h6><blockquote><p>用powershell执行adb命令需要将adb.exe配置到环境变量里</p></blockquote><h6 id="5-性能设置里，将System-vmdk设置成可写入。然后重启模拟器"><a href="#5-性能设置里，将System-vmdk设置成可写入。然后重启模拟器" class="headerlink" title="5. 性能设置里，将System.vmdk设置成可写入。然后重启模拟器"></a>5. 性能设置里，将System.vmdk设置成可写入。然后重启模拟器</h6><h6 id="6-安装magisk管理器，这里雷电9应该安装debug版本的。"><a href="#6-安装magisk管理器，这里雷电9应该安装debug版本的。" class="headerlink" title="6. 安装magisk管理器，这里雷电9应该安装debug版本的。"></a>6. 安装magisk管理器，这里雷电9应该安装debug版本的。</h6><p><a href="https://github.com/topjohnwu/magisk-files/blob/canary/app-debug.apk">https://github.com/topjohnwu/magisk-files/blob/canary/app-debug.apk</a></p><h6 id="7-给magisk超级用户权限"><a href="#7-给magisk超级用户权限" class="headerlink" title="7. 给magisk超级用户权限"></a>7. 给magisk超级用户权限</h6><blockquote><p>要给面具开root，涉及到adb是否可以切换到su权限</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">PS</span> C:\Users\c60038363\Desktop\小工具\雷电模拟器\雷电模拟器&gt; adb shell</span><br><span class="line"></span><br><span class="line">star2qltechn:/ <span class="variable">$</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">star2qltechn:/ <span class="variable">$</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">star2qltechn:/ <span class="variable">$</span> su</span><br><span class="line"></span><br><span class="line">su</span><br><span class="line"></span><br><span class="line">star2qltechn:/<span class="comment">#</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h6 id="8-点击安装，允许权限，下一步，方式选择安装至系统分区，然后开始"><a href="#8-点击安装，允许权限，下一步，方式选择安装至系统分区，然后开始" class="headerlink" title="8. 点击安装，允许权限，下一步，方式选择安装至系统分区，然后开始"></a>8. 点击安装，允许权限，下一步，方式选择安装至系统分区，然后开始</h6><h6 id="9-打开magisk设置，勾选zygisk后，重启"><a href="#9-打开magisk设置，勾选zygisk后，重启" class="headerlink" title="9. 打开magisk设置，勾选zygisk后，重启"></a>9. 打开magisk设置，勾选zygisk后，重启</h6><h6 id="10-安装lsposed：https-github-com-LSPosed-LSPosed-releases"><a href="#10-安装lsposed：https-github-com-LSPosed-LSPosed-releases" class="headerlink" title="10. 安装lsposed：https://github.com/LSPosed/LSPosed/releases"></a>10. 安装lsposed：<a href="https://github.com/LSPosed/LSPosed/releases">https://github.com/LSPosed/LSPosed/releases</a></h6><blockquote><p>将LSPosed-v1.8.4-6609-zygisk-release.zip推送到模拟器，magisk模块选择从本地安装。安装完重启</p></blockquote><blockquote><p>配置</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">adb push LSPosed<span class="literal">-v1</span>.<span class="number">8.4</span><span class="literal">-6609-zygisk-release</span>.zip /sdcard/Download/</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="11-安装LSPosed-Manager-模拟器打开文件管理器"><a href="#11-安装LSPosed-Manager-模拟器打开文件管理器" class="headerlink" title="11. 安装LSPosed Manager 模拟器打开文件管理器"></a>11. 安装LSPosed Manager 模拟器打开文件管理器</h6><blockquote><p>下载到本地，然后安装manager.apk</p></blockquote><h6 id="12-安装justtrustme-https-github-com-ViRb3-TrustMeAlready"><a href="#12-安装justtrustme-https-github-com-ViRb3-TrustMeAlready" class="headerlink" title="12. 安装justtrustme https://github.com/ViRb3/TrustMeAlready"></a>12. 安装justtrustme <a href="https://github.com/ViRb3/TrustMeAlready">https://github.com/ViRb3/TrustMeAlready</a></h6><blockquote><p>安装apk后，在lsposed上启动模块，选择要启动的该模块的应用</p></blockquote><h6 id="13-隐藏root，"><a href="#13-隐藏root，" class="headerlink" title="13. 隐藏root，"></a>13. 隐藏root，</h6><blockquote><p>进入magisk设置，选择magiskhide菜单，选择要隐藏的进程，即可针对app隐藏root检测。</p></blockquote><blockquote><p>最后。需要关闭虚拟机自带root权限，让magisk来接管root权限,来应对下面问题:</p></blockquote><blockquote><p>进入magisk提示不属于magisk的su。此时要关闭模拟器自带的root。再重启</p></blockquote><h6 id="14-再重启模拟器，即可实现隐藏root和绕过SSL证书校验抓包。"><a href="#14-再重启模拟器，即可实现隐藏root和绕过SSL证书校验抓包。" class="headerlink" title="14. 再重启模拟器，即可实现隐藏root和绕过SSL证书校验抓包。"></a>14. 再重启模拟器，即可实现隐藏root和绕过SSL证书校验抓包。</h6><p><img src="http://obs.aqianer.top/blogimg/20241216192721850.png" alt="dsdada"></p><p><img src="https://i-blog.csdnimg.cn/blog_migrate/8d05a3cb35c0a3c8840d26551846e9c0.jpeg" alt="d"></p><p><img src="https://www.freeimg.cn/i/2024/12/16/67601115a36f1.webp" alt="-imageonline.co-7596435.png"></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
